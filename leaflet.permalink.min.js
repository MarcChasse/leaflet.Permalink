L.Permalink={getMapLocation:function(b,c){b=b||0===b?b:18;c=c?c:[52.26869,-113.81034];if(""!==window.location.hash){var a=window.location.hash.replace("#","").split(",");3===a.length&&(c={c:parseFloat(a[0]),f:parseFloat(a[1])},b=parseInt(a[2].slice(0,-1),10))}return{zoom:b,a:c}},setup:function(b){var c=!0;b.j("moveend",function(){if(c){var a=b.h(),d="#"+Math.round(1E5*a.c)/1E5+","+Math.round(1E5*a.f)/1E5+","+b.b()+"z",a={zoom:b.b(),a:a};window.history.pushState(a,"map",d)}else c=!0});window.addEventListener("popstate",function(a){null!==a.state&&(b.l(a.state.a,a.state.zoom),c=!1)})}};